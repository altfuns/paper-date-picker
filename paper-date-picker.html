<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-media-query/core-media-query.html">
<link rel="import" href="../core-scroll-threshold/core-scroll-threshold.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../core-animated-pages/core-animated-pages.html">
<link rel="import" href="../core-list/core-list.html">

<!--
Material Design [Pickers](http://www.google.com/design/spec/components/pickers.html)

Provides a responsive date picker based on the material design spec. This
component aims to be a clone of the date picker found on Google Calendar for
Android. 
-->

<script src="../moment/min/moment-with-locales.min.js"></script>

<polymer-element name="paper-date-picker" attributes="locale minYear maxYear">
  <template>
    <link rel="stylesheet" href="paper-date-picker.css">
    <core-media-query query="max-width: 560px" queryMatches="{{narrow}}"></core-media-query>
    <div id="datePicker" layout vertical?="{{narrow}}" horizontal?="{{!narrow}}">
      <template if="{{showHeading}}">
        <div id="heading" class="heading-content pg-{{$.pages.selectedItem.id}}" layout vertical>
          <div class="weekday">{{headingDate|dateFormat('dddd')}}</div>
          <div class="date" flex layout vertical justified>
            <div class="month" on-tap="{{tapHeadingMonth}}">{{headingDate|dateFormat('MMM')}}</div>
            <div class="day" on-tap="{{tapHeadingDay}}">{{headingDate|dateFormat('D')}}</div>
            <div class="year" on-tap="{{tapHeadingYear}}">{{headingDate|dateFormat('YYYY')}}</div>
          </div>
        </div>
      </template>
      <core-animated-pages selectedProperty="active" transitions="cross-fade" id="pages" notap relative>
        <section id="chooseDay" fit>
          <!--
          <core-scroll-threshold id="calendarListThreshold" scrollTarget="{{$.calendarList}}" 
            lowerThreshold="512" upperThreshold="512" on-lower-trigger="{{loadMoreLower}}" 
            on-upper-trigger="{{loadMoreUpper}}"></core-scroll-threshold>
          -->
          <div id="calendarList" class="noscroll" cross-fade fit>
            <div id="calendarListViewPort">
              <div id="rafNodes">
                <template repeat="{{ years }}">
                  <div class="raf0 title-year" id="raf0Year{{year}}">{{year}}</div>
                  <div class="raf1 title-year" id="raf1Year{{year}}">{{year}}</div>
                </template>
                <template repeat="{{ day in rafDays }}">
                  <div class="day raf0" id="raf0Day{{day}}">{{day}}</div>
                  <div class="day raf1" id="raf1Day{{day}}">{{day}}</div>
                </template>
                <template repeat="{{ name in monthNames }}">
                  <div class="title-month" id="rafMonthName{{name}}">{{name}}</div>
                </template>
                <template repeat="{{ n in rafSets }}">
                  <div class="month" id="raf{{n}}Month">
                    <div class="month-title">&nbsp;</div>
                    <div class="month-weekdays" layout horizontal>
                      <div class="day">S</div>
                      <div class="day">M</div>
                      <div class="day">T</div>
                      <div class="day">W</div>
                      <div class="day">T</div>
                      <div class="day">F</div>
                      <div class="day">S</div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </section>
        <section id="chooseYear" fit>
          <core-list id="yearList" data="{{years}}" selection="{{selectedYear}}" cross-fade fit layout vertical>
            <template>
              <paper-item class="year {{ {selected: selected, } | tokenList}}" 
                layout horizontal center-justified><div>{{model.year}}</div></paper-item>
            </template>
          </core-list>
        </section>
      </core-animated-pages>
    </div>
  </template>
</polymer-element>

<script src="paper-date-picker.js"></script>
